<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
  
/* global nn */

const audio = 'violin_d_string.mp3'
let img = 'one_string_violino.png'

let music

let mouseX_old = nn.mouseX

let mouseX_new

let mousespeed

function setup(){
  nn.get('body').css({ backgroundColor: "black"})
  nn.create('span').
    content("World's Small Violin")
    .addTo('body')
  .css({
    position: 'absolute',
    top: (nn.height / 3),
    left: (nn.width / 4),
    color:"white",
    fontSize: (nn.height / 10),
  })
  
  nn.create('span').
    content("click/tap to start")
    .addTo('body')
  .css({
    position: 'absolute',
    top: (nn.height / 3) + (nn.height / 4),
    left: (nn.width / 2),
    color:"white",
    fontSize: (nn.height / 20),
  })
  .on('click', () => start())
}

function start(){
  document.body.innerText = ""
  nn.get('body').css({ backgroundColor: "white"})
  //VIOLIN
  nn.create('img')
  .set({
    src: img,
    width: nn.height * 0.75,
    draggable: false,
    //overflow: hidden
  })
  .css({
    position: 'fixed',
    top: -nn.height * 0.15,
  })
  .addTo('body')
  //SOUND
  music = nn.create('audio')
  .set({
    src: audio,
    controls: true,
    //display: none
  })
  .addTo('body')
}  

function speedLog(){
  //mousespeed = 5
  mouseX_new = nn.mouseX
  mousespeed = mouseX_new - mouseX_old
  mouseX_old = mouseX_new
  console.log(mousespeed)
}

async function bow(){
  await music.play()
}

async function release(){
  //while music.volume > 0:
  //
}
//window.onscroll = function () { window.scrollTo(0, 0); };
nn.on('load', start)
nn.on('mousemove', speedLog)
nn.on('mousedown', bow)
nn.on('mouseup', release)
//nn.on('load', animate)
  
</script>